(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(14),a=n.n(c),o=n(3),r=n(1),i=n(0),u=function(e){var t=e.filter,n=e.handleFilterChange;return Object(i.jsxs)("div",{children:["Search: ",Object(i.jsx)("input",{value:t,onChange:n})]})},l=function(e){var t=e.addName,n=e.name,c=e.number,a=e.handleNameChange,o=e.handleNumberChange;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsxs)("div",{children:["Name: ",Object(i.jsx)("input",{value:n,onChange:a})]}),Object(i.jsxs)("div",{children:["Number: ",Object(i.jsx)("input",{value:c,onChange:o})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{className:"addButton",type:"submit",children:"add"})})]})},s=function(e){var t=e.person,n=e.handleDeleteRequest;return Object(i.jsxs)("li",{children:[t.name,": ",t.number," ",Object(i.jsx)("button",{className:"deleteButton",onClick:function(){return n(t)},children:"delete"})]})},d=function(e){var t=e.personsToShow,n=e.handleDeleteRequest;return Object(i.jsx)("ul",{children:t.map((function(e){return Object(i.jsx)(s,{person:e,handleDeleteRequest:n},e.name)}))})},h=n(4),j=n.n(h),f="http://localhost:3001/api/persons",b={getAll:function(){return j.a.get(f)},create:function(e){return j.a.post(f,e)},update:function(e,t){return j.a.put("".concat(f,"/").concat(e),t)},deleteContact:function(e){return j.a.delete("".concat(f,"/").concat(e))}},m=function(e){var t=e.message;return null===t?null:Object(i.jsx)("div",{className:"error"===t.type?"error":"notification",children:t.text})},p=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(o.a)(a,2),h=s[0],j=s[1],f=Object(r.useState)(""),p=Object(o.a)(f,2),O=p[0],x=p[1],v=Object(r.useState)(""),g=Object(o.a)(v,2),C=g[0],N=g[1],w=Object(r.useState)(null),y=Object(o.a)(w,2),S=y[0],k=y[1];Object(r.useEffect)((function(){b.getAll().then((function(e){c(e.data)}))}),[]),Object(r.useEffect)((function(){setTimeout((function(){k(null)}),3e3)}),[S]);var D=0===C.length?n:n.filter((function(e){return e.name.toUpperCase().includes(C.toUpperCase())}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),null!==S&&Object(i.jsx)(m,{message:S}),Object(i.jsx)(u,{filter:C,handleFilterChange:function(e){N(e.target.value)}}),Object(i.jsx)("h2",{children:"Add Contact"}),Object(i.jsx)(l,{addName:function(e){e.preventDefault();var t={name:h,number:O},a="".concat(h," is already in the phonebook. Would you like to replace the old number with the new one?"),o=n.find((function(e){return e.name===h}));o?window.confirm(a)&&b.update(o.id,t).then((function(e){c(n.map((function(t){return t.id===o.id?e.data:t}))),k({type:"notification",text:"Updated ".concat(h)})})).catch((function(e){console.log(e),k({type:"error",text:"".concat(h,"'s information is no longer in the server")}),c(n.filter((function(e){return o.id!==e.id})))})):b.create(t).then((function(e){c(n.concat(e.data)),k({type:"notification",text:"Added ".concat(h)})})),j(""),x("")},name:h,number:O,handleNameChange:function(e){j(e.target.value)},handleNumberChange:function(e){x(e.target.value)}}),Object(i.jsx)("h2",{children:"Contacts"}),Object(i.jsx)(d,{personsToShow:D,handleDeleteRequest:function(e){window.confirm("Delete ".concat(e.name,"?"))&&b.deleteContact(e.id).then((function(){c(n.filter((function(t){return e.id!==t.id}))),k({type:"notification",text:"Deleted ".concat(e.name)})})).catch((function(t){k({type:"error",text:"".concat(h," is not in the server")}),c(n.filter((function(t){return t.id!==e.id})))}))}})]})};n(38);a.a.render(Object(i.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.2ba9789f.chunk.js.map